<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-user-select:inherit;-ms-user-select:inherit;user-select:inherit}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1;background-color:#000;color:#fff}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:"";content:none}table{border-collapse:collapse;border-spacing:0}.instructions{position:absolute;top:0;right:0;bottom:0;left:0;background-color:#056b56;color:#fff;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;padding:50px;z-index:99}.instructions-hidden{display:none}.instructions-content{width:100%;max-width:600px;margin:0 auto;display:flex;align-items:center;flex-direction:column;gap:40px}.instructions-content h3.instructions-heading{font-size:40px;font-weight:600;text-align:center;width:100%;color:inherit}.instructions-content ul{box-sizing:border-box;width:100%;max-width:400px;list-style:none;display:flex;flex-direction:column;gap:16px;padding:24px;background-color:#004e3e;border-radius:8px;border:2px solid #fff}.instructions-content ul li{font-size:20px;line-height:28px}.instructions-start{background-color:#f05023;color:#fff;border:0;font-size:40px;font-weight:600;height:80px;width:400px;margin:0 auto;border-radius:8px;text-transform:uppercase;font-family:inherit;line-height:88px;border:2px solid #fff}.instructions-start:hover{cursor:pointer;background-color:#004e3e}.instructions-logo{width:75%;margin:0 auto;user-select:inherit}body{font-family:sans-serif;overflow:hidden;background-color:#ef9841}.main-container{background-color:#004e3e;position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:"Special Elite",system-ui}header.header{position:initial !important;width:400px;height:150px;display:grid;grid-template-areas:"score info" "life life" "boss boss";grid-template-rows:50px 50px}.header__block{display:flex}.player-health{grid-area:life}.score-container{display:flex;align-items:center;font-size:24px;font-weight:bold;color:#e3e0c9;grid-area:score}.game-info{grid-area:info;justify-content:flex-end}.game-stats{display:flex;align-items:center;gap:30px}.game-stat{display:flex;align-items:center;gap:6px}.game-stat__key{font-size:12px;font-weight:bold;text-transform:uppercase;color:#ef9841}.game-stat__value{font-size:24px;font-weight:bold;color:#e3e0c9}.health-bar{width:400px;height:20px;border-radius:8px;background-color:#0a2114;border:2px solid #ef9841;display:flex;list-style:none;overflow:hidden}.health-bar li{width:40px;height:20px;animation:fadeIn 1s linear}#player-health-bar li{background-color:#f05023}#boss-info{display:none}#boss-health-bar{grid-area:boss;position:relative}#boss-health-bar:after{content:"BOSS";position:absolute;top:calc(50% + 2px);left:50%;text-align:center;font-size:16px;font-weight:900;color:#ef9841;transform:translate(-50%, -50%)}#boss-health-bar li{background-color:#056b56}#game-view{border:2px solid #ef9841;border-radius:8px;background:#000;touch-action:none;cursor:crosshair;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:10px}.main-container{position:fixed;top:0;left:0;width:100vw;height:100vh}body{-ms-overflow-style:none;scrollbar-width:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}body::-webkit-scrollbar{display:none}
</style>
<script type="text/javascript">
!function(){"use strict";!function(){function e(e,t){const i=t/Math.sqrt(e[0]**2+e[1]**2);return[e[0]*i,e[1]*i]}class t{constructor(e){this.position=e.position,this.velocity=e.velocity,this.speed=e.speed,this.health=e.health,this.game=e.game,this.width=e.width,this.height=e.height,this.image=e.image,this.type=e.type,this.rotationAngle=e.rotation||0,this.id=this.game.idCounter++,this.game.allMovingObjects[this.type][this.id]=this}draw(e){const[t,i]=this.position,[s,n]=[t+this.width/2,i+this.height/2];e.save(),e.translate(s,n),e.rotate(Math.PI/180*this.rotationAngle),e.translate(-s,-n),e.drawImage(this.image,t,i,this.width,this.height),e.restore()}collideCheck(e){const t=[];this.getHitbox().forEach(((i,s)=>{e.getHitbox().some((e=>{return s=e,(t=i).x<s.x+s.width&&t.x+t.width>s.x&&t.y<s.y+s.height&&t.height+t.y>s.y;var t,s}))&&t.push(s)})),t.length>0&&this.handleCollided(e,t)}handleCollided(e){const t=e.constructor.name;if("Projectile"===t){const t=e.health;e.remove(),this.damageTaken(t)}else if("EnemyShip"===t){const e=1;this.damageTaken(e)}else if("Boss"===t){const e=3;this.damageTaken(e)}}getHitbox(){const[e,t]=this.position;return[{x:e,y:t,width:this.width,height:this.height}]}move(e){this.updateVelocity();const i=e/t.NORMAL_FRAME_TIME_DELTA,s=this.velocity[0]*i,n=this.velocity[1]*i,o=this.position[0]+s,h=this.position[1]+n;this.handleBounds([o,h])}handleBounds(e){this.position=e}updateVelocity(){}inUpperYHeightBounds(e){return e<=this.game.canvasHeight+this.height}inUpperYBounds(e){return e>=0}inLowerYBounds(e){return e<=this.game.canvasHeight-this.height}inYBounds(e){return this.inUpperYBounds(e)&&this.inLowerYBounds(e)}inUpperXBounds(e){return e>=0}inLowerXBounds(e){return e<=this.game.canvasWidth-this.width}inXBounds(e){return this.inUpperXBounds(e)&&this.inLowerXBounds(e)}inBounds(e){return this.inXBounds(e[0])&&this.inYBounds(e[1])}remove(){delete this.game.allMovingObjects[this.type][this.id]}}var i,s,n;i=t,n=1e3/60,(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="NORMAL_FRAME_TIME_DELTA"))in i?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n;var o=t,h=class extends o{constructor(e){e.objArgs.type="projectiles",super(e.objArgs),this.origin=e.origin}handleBounds(e){this.inBounds(e)?this.position=e:super.remove()}},a=class{constructor(e,t,i){this.game=e,this.id=this.game.idCounter++,this.game.timers[this.id]=this,this.timerCallback=()=>{t(),delete this.game.timers[this.id]},this.startTime=Date.now(),this.delay=i,this.timeoutId=setTimeout(this.timerCallback.bind(this),this.delay)}pause(){clearTimeout(this.timeoutId),this.delay-=Date.now()-this.startTime}resume(){this.startTime=Date.now(),this.timeoutId=setTimeout(this.timerCallback.bind(this),this.delay)}clear(){clearTimeout(this.timeoutId),delete this.game.timers[this.id]}},r=class extends o{constructor(e,t,i){super(e),this.projectileArgs=t,this.patternArgs=i}shootProjectile(){this.patternArgs.forEach(((e,t)=>{if(!e.onCooldown&&this.inBounds(this.position)){for(let t=0;t<e.batchFireNum;t++)new a(this.game,(()=>{this.health>0&&e.positionDeltas.forEach((t=>{const[i,s]=this.position,[n,o]=t,a=[i+n,s+o],r=this.projectileArgs[e.projectileArgIndex];r.objArgs.position=a,new h(r)}))}),e.batchFireInterval*t);e.onCooldown=!0;const i=e.batchFireInterval*e.batchFireNum;e.timer=new a(this.game,this.resetCooldown.bind(this,t),e.cooldown+i)}}))}resetCooldown(e){this.patternArgs[e].onCooldown=!1,this.patternArgs[e].timer=null}damageTaken(e){this.health-=e,this.health<=0&&this.remove()}},l=class extends o{constructor(e,t,i,s,n){const o=document.createElement("img");"minor"===s?o.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/dfd05171-57ad-4a36-9e7b-7110cdab1baf/explosion1.png":"major"===s&&(o.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/a8f574e9-b0db-4cb8-bc91-f626fae49fd6/explosion2.png"),super({position:i,velocity:[0,0],speed:0,health:0,game:e,width:t,height:t,image:o,type:"explosions"}),"minor"===s?(this.maxFrames=20,this.imgSize=192,this.cutSize=5):"major"===s&&(this.maxFrames=48,this.imgSize=240,this.cutSize=8),this.frame=0,this.velocityDelta=n}draw(e){const t=Math.floor(this.frame/this.cutSize),i=this.frame%this.cutSize;e.drawImage(this.image,this.imgSize*i,this.imgSize*t,this.imgSize,this.imgSize,this.position[0],this.position[1],this.width,this.height),this.frame+=1,this.frame>=this.maxFrames&&this.remove()}updateVelocity(){this.velocity[0]+=this.velocityDelta[0],this.velocity[1]+=this.velocityDelta[1]}};function d(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends r{constructor(e){let t=document.createElement("img");t.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/48067fa2-57f9-42c8-baed-7207d4b4085c/player1.png";const i={width:34,height:55,position:[Math.floor(e.canvasWidth/2),e.canvasHeight-55],velocity:[0,0],speed:c.SPEED,health:c.MAX_HEALTH,game:e,image:t,type:"player"};t=document.createElement("img"),t.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/f0cc2cc7-6f4f-4ecb-80d9-b13bbd04720c/enemy_projectile.png",super(i,[{objArgs:{velocity:[0,-10],speed:10,health:1,game:e,width:5,height:20,image:t},type:"bullet",origin:"player"}],[{positionDeltas:[[34/2.3,0]],batchFireNum:1,batchFireInterval:0,cooldown:250,onCooldown:!1,timer:null,projectileArgIndex:0}]),this.keysPressed={up:!1,down:!1,left:!1,right:!1,shoot:!1},this.disabled=!1,this.invincible=!1}getHitbox(){return[{x:this.position[0]+this.width/3,y:this.position[1],width:this.width/3,height:this.height},{x:this.position[0],y:this.position[1]+.65*this.height,width:this.width,height:this.height/5}]}updateVelocity(){let t=[0,0];if(this.disabled)t[1]=2;else if(this.game.gameView.mouseFollow&&this.game.gameView.mousePosition){const i=this.game.gameView.mousePosition.x-(this.position[0]+this.width/2),s=this.game.gameView.mousePosition.y-(this.position[1]+this.height/2),n=2;i>n?t[0]+=Math.min(this.speed,i):i<-n&&(t[0]-=Math.min(this.speed,-i)),s>n?t[1]+=Math.min(this.speed,s):s<-n&&(t[1]-=Math.min(this.speed,-s)),t[0]&&t[1]&&(t=e(t,(Math.abs(t[0])+Math.abs(t[1]))/2))}else this.keysPressed.right&&(t[0]+=this.speed),this.keysPressed.left&&(t[0]-=this.speed),this.keysPressed.up&&(t[1]-=this.speed),this.keysPressed.down&&(t[1]+=this.speed),t[0]&&t[1]&&(t=e(t,this.speed));this.velocity=t}shootProjectile(){this.keysPressed.shoot&&!this.disabled&&super.shootProjectile()}handleBounds(e){this.inXBounds(e[0])&&(this.position[0]=e[0]),this.inYBounds(e[1])&&(this.position[1]=e[1])}damageTaken(e){!this.invincible&&this.health>=0&&(super.damageTaken(e),this.invincible=!0,new a(this.game,this.resetInvincibility.bind(this),1e3))}resetInvincibility(){this.invincible=!1}remove(){this.disabled||(this.disabled=!0,new a(this.game,(()=>{const e=this.position[0]-40,t=this.position[1]-20;new l(this.game,100,[e,t],"major",[0,0]),super.remove(),new a(this.game,this.game.setGameOver.bind(this.game),3e3)}),1e3))}}d(c,"SPEED",5),d(c,"MAX_HEALTH",10);var m=c,g=class extends r{constructor(e,t,i,s){let n=document.createElement("img");n.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/740c1152-1afc-40a3-8d50-8e2cdec8261f/enemy1.png",t<-23?t=0:t>e.canvasWidth-23&&(t=e.canvasWidth-23);const o={width:23,height:80,position:[t,-160],velocity:[0,i],speed:i,health:1,game:e,image:n,type:"enemies"};n=document.createElement("img"),n.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/f0cc2cc7-6f4f-4ecb-80d9-b13bbd04720c/enemy_projectile.png",super(o,[{objArgs:{velocity:[0,8],speed:8,health:1,game:e,width:5,height:20,image:n},type:"bullet",origin:"enemy"}],[{positionDeltas:[[23/2.25,10]],batchFireNum:1,batchFireInterval:0,cooldown:s,onCooldown:!1,timer:null,projectileArgIndex:0}])}handleBounds(e){this.inUpperYHeightBounds(e[1])?this.position=e:this.remove()}remove(){this.health<=0&&(new l(this.game,80,this.position,"minor",[0,.25]),this.game.score+=50),super.remove(),this.game.enemiesRemaining-=1}};class u extends r{constructor(e){let t=document.createElement("img");t.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/07783292-53fc-470b-8b8c-2299bd8e7a01/boss1.png";let i=u.MAX_HEALTH;const s={width:178,height:258,position:[e.canvasWidth/2-89,-516],velocity:[0,1],speed:1,health:i,game:e,image:t,type:"enemies"};t=document.createElement("img"),t.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/f0cc2cc7-6f4f-4ecb-80d9-b13bbd04720c/enemy_projectile.png",super(s,[{objArgs:{velocity:[0,8],speed:8,health:2,game:e,width:10,height:40,image:t},type:"bullet",origin:"enemy"}],[{positionDeltas:[[18,200],[146,200]],batchFireNum:1,batchFireInterval:0,cooldown:1e3,onCooldown:!0,timer:null,projectileArgIndex:0},{positionDeltas:[[60,210],[102,210]],batchFireNum:2,batchFireInterval:150,cooldown:2e3,onCooldown:!0,timer:null,projectileArgIndex:0},{positionDeltas:[[75,180],[90,180]],batchFireNum:2,batchFireInterval:150,cooldown:1e3,onCooldown:!0,timer:null,projectileArgIndex:0},{positionDeltas:[[100,160],[68,160]],batchFireNum:3,batchFireInterval:150,cooldown:2e3,onCooldown:!0,timer:null,projectileArgIndex:0}])}getHitbox(){return[{x:this.position[0]+85,y:this.position[1]+90,width:80,height:70},{x:this.position[0]+10,y:this.position[1]+90,width:(this.width-100)/2,height:this.height-110},{x:this.position[0]+165,y:this.position[1]+90,width:(this.width-100)/2,height:this.height-110},{x:this.position[0]+45,y:this.position[1]+30,width:155,height:60}]}handleCollided(e,t){if("Projectile"===e.constructor.name){if(t.includes(0)){const t=e.health;this.damageTaken(t)}e.remove()}}updateVelocity(){this.movementDisabled||this.position[1]>0&&(this.speed=1.5,0===this.velocity[0]||this.position[0]<0?(0===this.velocity[0]&&(new a(this.game,this.resetCooldown.bind(this,0),1250),this.game.player.disabled=!1),this.velocity=[this.speed,0]):this.position[0]>this.game.canvasWidth-this.width&&(this.velocity=[-this.speed,0]))}updateShootingPattern(){20===this.health?(this.patternArgs[0].timer?.clear(),this.patternArgs[1].timer?.clear(),this.patternArgs[2].timer?.clear(),this.patternArgs[0].onCooldown=!1,this.patternArgs[1].onCooldown=!1,this.patternArgs[2].onCooldown=!1,this.patternArgs[3].onCooldown=!1):30===this.health?(this.patternArgs[0].timer?.clear(),this.patternArgs[1].timer?.clear(),this.patternArgs[0].onCooldown=!1,this.patternArgs[1].onCooldown=!1,this.patternArgs[2].onCooldown=!1):40===this.health&&(this.patternArgs[0].timer?.clear(),this.patternArgs[0].onCooldown=!1,this.patternArgs[1].onCooldown=!1)}shootProjectile(){this.disabled||super.shootProjectile()}damageTaken(e){this.disabled||(super.damageTaken(e),this.updateShootingPattern())}remove(){this.game.score+=1e3,this.disabled=!0;for(let e=0;e<20;e++){const t=200*e;new a(this.game,(()=>{const t=this.getHitbox(),i=t[e%t.length],s=Math.floor(Math.random()*(i.x+i.width-i.x)+i.x),n=Math.floor(Math.random()*(i.y+i.height-i.y)+i.y),o=this.velocity[0]<0?30:10;new l(this.game,80,[s-o,n-70],"minor",[0,.1])}),t)}new a(this.game,(()=>{this.velocity=[0,0],this.speed=0,this.movementDisabled=!0}),4e3),new a(this.game,(()=>{this.velocity[0];const e=this.position[0]-this.width/2,t=this.position[1]-this.height/1.5;new l(this.game,500,[e-30,t],"major",[0,0]),super.remove(),new a(this.game,this.game.setWin.bind(this.game),3500)}),4500)}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:50,enumerable:!0,configurable:!0,writable:!0}):e[t]=50}(u,"MAX_HEALTH");var p=u;class y{constructor(e,t){this.canvas=e,this.canvasWidth=e.width,this.canvasHeight=e.height,this.gameView=t,this.enemyWave=0,this.addEnemyOnCooldown=!0,this.addedEnemies=0,this.enemiesRemaining=0,this.enemyWaveCount=0,this.score=0,this.gameOver=!1,this.win=!1,this.secretEnd=!1,this.startScreen=!0,this.idCounter=1,this.timers={},this.allMovingObjects={player:{},enemies:{},projectiles:{},explosions:{}},this.player=new m(this),this.bossFight=!1,this.boss=null}step(e){this.checkCollisions(),this.bossFight||this.setEnemies(),this.moveObjects(e),this.shootProjectiles()}pauseTimers(){Object.values(this.timers).forEach((e=>e.pause()))}resumeTimers(){Object.values(this.timers).forEach((e=>e.resume()))}moveObjects(e){for(let t in this.allMovingObjects)Object.values(this.allMovingObjects[t]).forEach((t=>t.move(e)))}shootProjectiles(){this.player.shootProjectile(),Object.values(this.allMovingObjects.enemies).forEach((e=>e.shootProjectile()))}checkCollisions(){Object.values(this.allMovingObjects.projectiles).forEach((e=>{"player"===e.origin?Object.values(this.allMovingObjects.enemies).forEach((t=>{t.collideCheck(e)})):this.player.collideCheck(e)})),Object.values(this.allMovingObjects.enemies).forEach((e=>{this.player.collideCheck(e)}))}healPlayer(){this.allMovingObjects.player&&this.player.health>0&&(this.player.health=Math.min(this.player.health+3,m.MAX_HEALTH))}setEnemies(){if(0===this.enemiesRemaining&&(this.enemyWave<y.MAX_ENEMY_WAVE?(this.enemyWave+=1,this.enemyWaveCount=5*this.enemyWave,this.enemiesRemaining=this.enemyWaveCount,this.addedEnemies=0,this.enemyWave>1&&(this.score+=100*this.player.health,this.healPlayer())):this.setBoss()),!this.addEnemyOnCooldown){const e=this.enemyWaveCount-this.addedEnemies;let t;t=e<10?e:Math.floor(7*Math.random()+3),this.addedEnemies+=t;for(let e=0;e<t;e++){const e=Math.floor(Math.random()*this.canvasWidth),t=3*Math.random()+2,i=Math.floor(550*Math.random()+450);new g(this,e,t,i)}this.addEnemyOnCooldown=!0;const i=2e3*Math.random()+1e3;new a(this,this.resetAddEnemyCooldown.bind(this),i)}}resetAddEnemyCooldown(){this.addEnemyOnCooldown=!1}setBoss(){this.player.disabled=!0,0===Object.values(this.allMovingObjects.projectiles).length&&(this.boss=new p(this),this.score+=100*this.player.health,this.healPlayer(),this.bossFight=!0,this.gameView.switchGameInformation())}setWin(){this.player?.health<=0&&(this.secretEnd=!0),this.gameOver||(this.score+=200*this.player.health,this.win=!0)}setGameOver(){this.boss?.health<=0?this.secretEnd=!0:this.win||(this.gameOver=!0)}reset(){this.enemyWave=0,this.addEnemyOnCooldown=!0,this.addedEnemies=0,this.enemiesRemaining=0,this.enemyWaveCount=0,this.score=0,this.gameOver=!1,this.win=!1,this.secretEnd=!1,this.startScreen=!1;for(const e in this.timers)delete this.timers[e];for(const e in this.allMovingObjects)for(const t in this.allMovingObjects[e])delete this.allMovingObjects[e][t];this.idCounter=1,this.player=new m(this),this.boss=null,this.bossFight=!1,this.gameView.switchGameInformation()}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:5,enumerable:!0,configurable:!0,writable:!0}):e[t]=5}(y,"MAX_ENEMY_WAVE");var v=y;function b(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w{constructor(e,t){this.ctx=t,this.canvas=e,this.canvasWidth=e.width,this.canvasHeight=e.height,this.game=new v(e,this),this.scoreSpan=document.getElementById("score"),this.playerHealthBar=document.getElementById("player-health-bar"),this.bossHealthBar=document.getElementById("boss-health-bar"),this.bossInfo=document.getElementById("boss-info"),this.waveInfo=document.getElementById("wave-info"),this.waveSpan=document.getElementById("wave-number"),this.enemiesRemainingSpan=document.getElementById("enemies-remaining");const i=new Image;i.src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/c73080e6-fa02-4ce0-a799-d37804d79578/game_background.jpg",this.bgSettings={img:i,x:0,y:700,dy:.777},this.touchOnElement=document.getElementById("touch-on"),this.touchOffElement=document.getElementById("touch-off"),this.mouseFollow=!0,this.mousePosition=null,this.pauseOnElement=document.getElementById("pause-on"),this.pauseOffElement=document.getElementById("pause-off"),this.pauseText=document.getElementById("pause-text"),this.pause=!1,this.toggleSound=!1,this.messageDrawn=!1,this.bindInstructionsHandler(),this.bindStartHandler()}start(){this.lastTime=0,this.drawBackground(),requestAnimationFrame(this.animate.bind(this))}animate(e){if(this.game.startScreen||this.game.gameOver||this.game.win)this.pause&&this.handlePauseToggle(),this.drawStartWinGameOver();else if(!this.pause){this.draw(),this.updateGameInfo();const t=e-this.lastTime;this.game.step(t)}this.lastTime=e,requestAnimationFrame(this.animate.bind(this))}drawStartWinGameOver(){if(!this.messageDrawn){const e=this.game.startScreen?["Tap to","START"]:this.game.secretEnd?"🫡":this.game.gameOver?"GAME OVER":"YOU WIN";this.ctx.textAlign="center",this.ctx.fillStyle="#ef9841",this.game.startScreen?(this.ctx.font="40px 'Special Elite'",this.ctx.fillText(e[0],this.canvasWidth/2,this.canvasHeight/2-50),this.ctx.font="48px 'Special Elite'",this.ctx.fillText(e[1],this.canvasWidth/2,this.canvasHeight/2)):(this.ctx.font="48px 'Special Elite'",this.ctx.fillText(e,this.canvasWidth/2,this.canvasHeight/2)),this.messageDrawn=!0,(this.game.gameOver||this.game.win)&&(this.removeControlHandlers(),this.updateScore(),setTimeout(this.drawRetryKey.bind(this,this.ctx),3e3))}}drawRetryKey(){this.ctx.font="24px 'Special Elite'",this.ctx.fillText("Tap to retry",this.canvasWidth/2,this.canvasHeight/2+50),this.bindRetryHandler()}drawPause(){this.ctx.textAlign="center",this.ctx.fillStyle="#ef9841",this.ctx.font="48px 'Special Elite'",this.ctx.fillText("PAUSED",this.canvasWidth/2,this.canvasHeight/2)}draw(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawBackground();for(let e in this.game.allMovingObjects)Object.values(this.game.allMovingObjects[e]).forEach((e=>e.draw(this.ctx)))}drawBackground(){const e=this.bgSettings.img;this.bgSettings.y>this.canvasHeight&&(this.bgSettings.y-=e.height),this.bgSettings.y>0&&this.ctx.drawImage(e,this.bgSettings.x,this.bgSettings.y-e.height,e.width,e.height),this.ctx.drawImage(e,this.bgSettings.x,this.bgSettings.y,e.width,e.height),this.bgSettings.y+=this.bgSettings.dy}updateGameInfo(){this.updateScore(),this.updateHealthBar("player"),this.game.bossFight?this.updateHealthBar("boss"):(this.waveSpan.innerText=this.game.enemyWave,this.enemiesRemainingSpan.innerText=this.game.enemiesRemaining)}updateScore(){this.scoreSpan.innerText=this.game.score}updateHealthBar(e){let t,i;"player"===e?(t=this.game.player,i=this.playerHealthBar):(t=this.game.boss,i=this.bossHealthBar);let s=t.health;const n=document.createElement("li");if(n.setAttribute("class",`${e}-health-point`),"boss"===e&&(s=Math.ceil(s/(p.MAX_HEALTH/10))),i.children.length<s)for(let e=0;e<s-i.children.length;e++)i.appendChild(n);else if(i.children.length>s)for(let e=0;e<i.children.length-s;e++)i.lastChild&&i.removeChild(i.lastChild)}switchGameInformation(){this.game.bossFight?(this.waveInfo.style.display="none",this.bossInfo.style.display="flex"):(this.waveInfo.style.display="flex",this.bossInfo.style.display="none")}handleStartKey(e){" "===e?.key&&e.preventDefault(),this.canvas.scrollIntoView(),this.game.startScreen=!1,document.removeEventListener("keypress",this.startHandler),this.canvas.removeEventListener("pointerdown",this.startHandler),this.bindControlHandlers(),setTimeout(this.game.resetAddEnemyCooldown.bind(this.game),1500),this.messageDrawn=!1}handleInstructionsButton(){document.getElementById("instructions").classList.toggle("instructions-hidden")}bindInstructionsHandler(){this.instructionsButtonHandler=this.handleInstructionsButton.bind(this),document.getElementById("start-game").addEventListener("click",this.instructionsButtonHandler)}bindStartHandler(){this.startHandler=this.handleStartKey.bind(this),document.addEventListener("keypress",this.startHandler),this.canvas.addEventListener("pointerdown",this.startHandler)}handleRetryKey(e){" "===e?.key&&e.preventDefault(),this.canvas.scrollIntoView(),document.removeEventListener("keypress",this.retryHandler),this.canvas.removeEventListener("pointerdown",this.retryHandler),this.game.reset(),this.bindControlHandlers(),setTimeout(this.game.resetAddEnemyCooldown.bind(this.game),1500),this.messageDrawn=!1}bindRetryHandler(){this.retryHandler=this.handleRetryKey.bind(this),document.addEventListener("keypress",this.retryHandler),this.canvas.addEventListener("pointerdown",this.retryHandler)}handleMouseMove(e){const t=this.canvas.getBoundingClientRect(),i=this.canvas.width/t.width,s=this.canvas.height/t.height,n=(e.clientX-t.left)*i,o=(e.clientY-t.top)*s;this.mousePosition={x:n,y:o}}handleMouseOut(){this.mousePosition=null}handleMouseFollowToggle(){this.mouseFollow?(this.touchOnElement.style.display="none",this.touchOffElement.style.display="block"):(this.touchOnElement.style.display="block",this.touchOffElement.style.display="none"),this.mouseFollow=!this.mouseFollow}handlePauseToggle(){(this.game.startScreen||this.game.gameOver||this.game.win)&&!this.pause||(this.pause?(this.game.resumeTimers(),this.pauseOnElement.style.display="none",this.pauseOffElement.style.display="block",this.pauseText.innerText="pause"):(this.game.pauseTimers(),this.pauseOnElement.style.display="block",this.pauseOffElement.style.display="none",this.pauseText.innerText="play",this.drawPause()),this.pause=!this.pause)}handleVisibilityChange(){!document.hidden||this.game.startScreen||this.game.gameOver||this.game.win||this.pause||this.handlePauseToggle(),document.hidden&&this.game.sounds.toggle?(this.game.sounds.handleSoundToggle(),this.toggleSound=!0):!document.hidden&&this.toggleSound&&(this.game.sounds.handleSoundToggle(),this.toggleSound=!1)}handleSettingKeybinds(e){"m"===e.key?this.handleMouseFollowToggle():"k"===e.key?this.game.sounds.handleSoundToggle():"p"===e.key&&this.handlePauseToggle()}handleKeyDown(e){e.preventDefault(),w.RIGHT_KEYS.includes(e.key)?this.game.player.keysPressed.right=!0:w.LEFT_KEYS.includes(e.key)?this.game.player.keysPressed.left=!0:w.UP_KEYS.includes(e.key)?this.game.player.keysPressed.up=!0:w.DOWN_KEYS.includes(e.key)?this.game.player.keysPressed.down=!0:" "===e.key&&(this.game.player.keysPressed.shoot=!0)}handleKeyUp(e){e.preventDefault(),w.RIGHT_KEYS.includes(e.key)?this.game.player.keysPressed.right=!1:w.LEFT_KEYS.includes(e.key)?this.game.player.keysPressed.left=!1:w.UP_KEYS.includes(e.key)?this.game.player.keysPressed.up=!1:w.DOWN_KEYS.includes(e.key)?this.game.player.keysPressed.down=!1:" "===e.key&&(this.game.player.keysPressed.shoot=!1)}handleMouseDown(e){const t=e.target.parentNode.id;w.IGNORE_TARGETS.includes(t)||(this.game.player.keysPressed.shoot=!0)}handleMouseUp(){this.game.player.keysPressed.shoot=!1}bindControlHandlers(){this.keyDownHandler=this.handleKeyDown.bind(this),this.keyUpHandler=this.handleKeyUp.bind(this),this.mouseDownHandler=this.handleMouseDown.bind(this),this.mouseUpHandler=this.handleMouseUp.bind(this),this.mouseMoveHandler=this.handleMouseMove.bind(this),this.mouseOutHandler=this.handleMouseOut.bind(this),document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler),document.addEventListener("pointerdown",this.mouseDownHandler),document.addEventListener("pointerup",this.mouseUpHandler),document.addEventListener("pointermove",this.mouseMoveHandler),document.addEventListener("pointerout",this.mouseOutHandler)}removeControlHandlers(){document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler),document.removeEventListener("pointerdown",this.mouseDownHandler),document.removeEventListener("pointerup",this.mouseUpHandler),document.removeEventListener("pointermove",this.mouseMoveHandler),document.removeEventListener("pointerout",this.mouseOutHandler)}}b(w,"UP_KEYS",["ArrowUp","w"]),b(w,"DOWN_KEYS",["ArrowDown","s"]),b(w,"RIGHT_KEYS",["ArrowRight","d"]),b(w,"LEFT_KEYS",["ArrowLeft","a"]),b(w,"IGNORE_TARGETS",["sound-on","sound-off","sound-icons-container","touch-on","touch-off","touch-container","pause-on","pause-off","pause-container"]);var f=w;const E=[];["https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/466ac424-0a07-406e-84cb-4510aef458c8/logo.png","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/07783292-53fc-470b-8b8c-2299bd8e7a01/boss1.png","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/740c1152-1afc-40a3-8d50-8e2cdec8261f/enemy1.pngg","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/48067fa2-57f9-42c8-baed-7207d4b4085c/player1.png","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/c73080e6-fa02-4ce0-a799-d37804d79578/game_background.jpg","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/dfd05171-57ad-4a36-9e7b-7110cdab1baf/explosion1.png","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/a8f574e9-b0db-4cb8-bc91-f626fae49fd6/explosion2.png","https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/f0cc2cc7-6f4f-4ecb-80d9-b13bbd04720c/enemy_projectile.png"].forEach(((e,t)=>{E[t]=new Image,E[t].src=e})),window.addEventListener("load",(()=>{window.canvas=document.getElementById("game-view"),window.ctx=canvas.getContext("2d"),new f(canvas,ctx).start()}))}()}();
</script>
<div class="main-container">
  <header class="header">
    <div class="header__block player-health">
      <ul id="player-health-bar" class="health-bar"></ul>
    </div>
    <div class="header__block score-container">
      <span id="score">0</span>
    </div>
    <div class="header__block game-info">
      <div class="game-stats" id="wave-info">
        <div class="game-stat">
          <p class="game-stat__key">Wave</p>
          <p class="game-stat__value" id="wave-number"></p>
        </div>
        <div class="game-stat">
          <p class="game-stat__key">Enemies</p>
          <p class="game-stat__value" id="enemies-remaining"></p>
        </div>
      </div>
    </div>
    <div id="boss-info">
      <ul id="boss-health-bar" class="health-bar"></ul>
    </div>
  </header>
  <canvas id="game-view" width="400" height="700"></canvas>
  <aside class="instructions" id="instructions">
    <div class="instructions-content">
      <img src="https://images.squarespace-cdn.com/content/6316c6e206a7993959718879/3e841f8c-165e-4984-9dd5-c773a1226f87/compAsset+4%4010x.png" class="instructions-logo" />
      <h3 class="instructions-heading">How to Play</h3>
      <ul id="rules">
        <li>Survive 5 waves of enemies and defeat the boss to win</li>
        <li>Avoid enemy projectiles and colliding with enemies</li>
        <li>Game over if player health reaches 0</li>
        <li>Score bonus points for remaining HP between waves</li>
      </ul>
      <button class="instructions-start" id="start-game">Got it!</button>
    </div>
  </aside>
</div>